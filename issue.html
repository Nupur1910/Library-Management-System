<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="viewbook.css" />
  </head>
  <body>
    <div class="main-cont">
      <div class="main-img">
        <h1>Library <br />Management <br />System</h1>
      </div>
      <div class="tb">
        <h2 class="books">View Members:</h2>
        <!-- <table class="table"> -->
        <!-- <tr class="table-heading">
            <th>BID</th>
            <th>Title</th>
            <th>Status</th>
            <th>Aurthor</th>
          </tr>
          <tr>
            <td>101</td>
            <td>Harry Potter</td>
            <td>J K Rowling</td>
            <td>Avail</td>
          </tr>
          <tr>
            <td>101</td>
            <td>Harry Potter</td>
            <td>J K Rowling</td>
            <td>Avail</td>
          </tr>
          <tr>
            <td>101</td>
            <td>Harry Potter</td>
            <td>J K Rowling</td>
            <td>Avail</td>
          </tr>
          <tr>
            <td>101</td>
            <td>Harry Potter</td>
            <td>J K Rowling</td>
            <td>Avail</td>
          </tr>
          <tr>
            <td>101</td>
            <td>Harry Potter</td>
            <td>J K Rowling</td>
            <td>Avail</td>
          </tr>
          <tr>
            <td>101</td>
            <td>Harry Potter</td>
            <td>J K Rowling</td>
            <td>Avail</td>
          </tr> -->
        <!-- </table> -->
        <!-- <script>
          window.onload = () => {
            var reader = new FileReader(),
              picker = document.getElementById("picker"),
              table = document.getElementsByClassName("table");

            picker.onchange = () => reader.readAsText(picker.files[0]);

            reader.onloadend = () => {
              let csv = reader.result;
              console.log(csv);

              table.innerHTML = "";
              let rows = csv.split("\r\n");

              for (let row of rows) {
                let cols = row.match(
                  /(?:\"([^\"]*(?:\"\"[^\"]*)*)\")|([^\",]+)/g
                );
                console.log(cols);
                if (cols != null) {
                  let tr = table.insertRow();
                  for (let col of cols) {
                    let td = tr.insertCell();
                    td.innerHTML = col.replace(/(^"|"$)/g, "");
                  }
                }
              }
            };
          };
        </script> -->

        <button
          type="button"
          name="load_data"
          id="load_data"
          class="btn btn-info tt"
        >
          Click here to display Member Data:
        </button>

        <div id="employee_table"></div>

        <script>
          $(document).ready(function () {
            $("#load_data").click(function () {
              $.ajax({
                url: "database/Book1.csv",
                dataType: "text",
                success: function (data) {
                  var employee_data = data.split(/\r?\n|\r/);
                  var table_data =
                    '<table class="table table-bordered table-striped">';
                  for (var count = 0; count < employee_data.length; count++) {
                    var cell_data = employee_data[count].split(",");
                    table_data += "<tr>";
                    for (
                      var cell_count = 0;
                      cell_count < cell_data.length;
                      cell_count++
                    ) {
                      if (count === 0) {
                        table_data += "<th>" + cell_data[cell_count] + "</th>";
                      } else {
                        table_data += "<td>" + cell_data[cell_count] + "</td>";
                      }
                    }
                    table_data += "</tr>";
                  }
                  table_data += "</table>";
                  $("#employee_table").html(table_data);
                },
              });
            });
          });
        </script>

        <a href="./index.html" style="margin-top: 5rem"
          ><button class="tt">QUIT</button></a
        >
      </div>
    </div>
  </body>
</html>
